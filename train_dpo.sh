deepspeed dpo_train.py \
    --model_name_or_path /blob/caxu/outputmodel/7b_lmsys10w_5wevolmix_instag1w_1800step_e3_4096/tmp-checkpoint-1700/ \
    --json_path data/sample_data.json \
    --data_split train \
    --output_dir /share/project/weihao/save_dir/checkpoints/train_ppo_1to5_reward_sppo_hard_nll_fix_6pair_no_duplicate_beta_0.03_hf_trl  \
    --num_train_epochs 1 \
    --beta 0.03 \
    --model_max_length 2048  \
    --per_device_train_batch_size 4  \
    --per_device_eval_batch_size 1  \
    --gradient_accumulation_steps 4  \
    --save_global_steps False \
    --eval_steps 50 \
    --save_strategy "steps"  \
    --save_steps 100  \
    --save_total_limit 25  \
    --learning_rate 5e-7  \
    --warmup_ratio 0.1 \
    --logging_steps 1  \
    --lr_scheduler_type "linear"  \
    --do_eval False \
    --evaluation_strategy "no"  \
    --conv_template "vicuna_v1.1" \
    --run_name "Deita-7b" \
    --seed 46 \
    --gradient_checkpointing True \
    --deepspeed configs/stage3_offloading_accelerate.json \
    --bf16 True \
    --report_to wandb \